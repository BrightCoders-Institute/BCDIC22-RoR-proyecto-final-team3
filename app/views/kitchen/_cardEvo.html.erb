<% (@ordersN.sort_by {|e| e.status}.reverse).group_by(&:order_id).each do |order_id, order_data| %>

  <div class='kitchen__order <%= statusColorOverlay(order_data.first.status) %>' id='order-<%= order_id %>'>

    <div role='button' class='kitchen__order__info__button <%= statuscolor(order_data.first.status) %>' id='btn-more-info-<%= order_id %>'>
      <div style="pointer-events: none;">
        Order: <%= order_id %>
      </div>
      <div style="pointer-events: none;">
        <%= order_data.first.table %>
      </div>
    </div>

    <% order_data.first(5).each_with_index do |data| %>
      <div class='kitchen__order__items'>
        <% if order_data.first.status == 'progress'%>
          <input type="checkbox" class="item-check" data-order-id="<%= order_id %>" data-item-id="<%= data.item_id %>" <%= data.status_item ? 'checked' : '' %>>
        <% end %>
        <label>- <%= data.item %> x<%= data.quantity %></label>
      </div>
    <% end %>

    <% if order_data.length > 5 %>
      <div class='kitchen__order__items'>
        <label>and <%= (order_data.length - 5).to_s %> more...</label>
      </div>
    <% end %>


    <div class='postit__note'>
      <p class='kitchen__order__notes__title'>Notes:</p>
      <p class='kitchen__order__notes__description'><%= order_data.first.note.truncate(80, omission: '...') %></p>
    </div>

    <%= button_to "#{statusTextBtn(order_data.first.status)}",
      update_status_kitchen_path(order_id),
      class: "kitchen__order__button #{statuscolor(order_data.first.status)}",
      method: :patch %>

  </div>

  <div class='kitchen__popup__overlay ' id='more-info-<%= order_id %>' style='display: none;'>

    <div class='kitchen__order kitchen__popup__card <%= statusColorOverlay(order_data.first.status) %>' id='order-<%= order_id %>'>

        <div role='button' class='kitchen__order__info__button__close <%= statuscolor(order_data.first.status) %>' id='btn-more-info-<%= order_id %>'>
          <div style="pointer-events: none;">
            Order: <%= order_id %>
          </div>
          <div style="pointer-events: none;">
            <%= order_data.first.table %>
          </div>
        </div>

      <% order_data.each_with_index do |data| %>
          <div  class='kitchen__order__items'>
            <% if order_data.first.status == 'progress'%>
              <input type="checkbox" id="scales" name="scales" class='check'>
            <% end %>
            <label><%= data.item %> x<%= data.quantity %></label>
          </div>
      <% end %>

      <div class='postit__note'>
        <p class='kitchen__order__notes__title'>Notes:</p>
        <p class='kitchen__order__notes__description'><%= order_data.first.note%></p>
      </div>

      <%= button_to "#{statusTextBtn(order_data.first.status)}",
        update_status_kitchen_path(order_id),
        class: "kitchen__order__button #{statuscolor(order_data.first.status)}",
        method: :patch %>
    </div>
  </div>

<% end %>
